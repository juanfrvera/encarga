<ion-header>
  <ion-toolbar>
    <ion-title>Detalle del pedido</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div id="container">
    <div class="detalle-pedido">
      <ion-card>
        <ion-card-header>
          <ion-card-title>Pedido #121314</ion-card-title>
        </ion-card-header>

        <ion-card-content>
          <ion-item *ngFor='let item of itemsConCantidad'>
            <ion-label>
              <h2>{{item.titulo}}</h2>
              <h2>Cantidad: {{item.cantidad}}</h2>
              <p>Subtotal: $ {{item.precio * item.cantidad}}</p>
            </ion-label>
          </ion-item>

          <ion-item>
            <ion-label>
              <h1>Total: $ {{this.total}}</h1>
            </ion-label>
          </ion-item>


        </ion-card-content>
      </ion-card>
    </div>

    <div class="detalle-entrega">
      <form [formGroup]="form" (ngSubmit)="clickFinalizar()">


        <ion-card>
          <ion-card-header>
            <ion-card-title>Detalle de entrega</ion-card-title>
          </ion-card-header>

          <ion-card-content>
            <ion-item>
              <ion-label position="floating">Nombre y Apellido</ion-label>
              <ion-input name="inputNombre" formControlName="nombre"></ion-input>
            </ion-item>
            <!-- Error message -->
            <span class="error" *ngIf="finalizado && errorControl.nombre.errors?.required">
              <ion-icon name="alert-circle-outline"></ion-icon> Por favor, escribe tu nombre y apellido.
            </span>

            <ion-radio-group formControlName="entrega">
              <ion-item>
                <ion-label>Envio a domicilio</ion-label>
                <ion-radio name="inputEnvio" slot="start" value="Envio a domicilio"></ion-radio>
              </ion-item>

              <ion-item>
                <ion-label>Retiro en sucursal</ion-label>
                <ion-radio name="inputRetiro" slot="start" value="Retira en sucursal"></ion-radio>
              </ion-item>
            </ion-radio-group>

            <ion-item *ngIf="form.value.entrega == 'Envio a domicilio'">
              <ion-label position="floating">Direccion</ion-label>
              <ion-input name="inputDireccion" formControlName="direccion"></ion-input>
            </ion-item>
            <!-- Error message -->
            <span class="error" *ngIf="finalizado && form.value.entrega == 'Envio a domicilio' && !form.value.direccion">
              <ion-icon name="alert-circle-outline"></ion-icon> Por favor, escribe tu direccion.
            </span>

            <ion-item>
              <ion-label position="floating">Comentarios</ion-label>
              <ion-textarea formControlName="comentarios"></ion-textarea>
            </ion-item>

          </ion-card-content>
        </ion-card>
        <ion-footer class="botones">
          <ion-button (click)="clickVolver()" color="medium">Volver</ion-button>
          <ion-button type="submit" color="primary">Finalizar</ion-button>
        </ion-footer>

      </form>

    </div>



  </div>

</ion-content>